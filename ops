{"author":{"id":"b588886e8ed752fadf1299e138ac3436c5eb556ee8e02466cae19fa663a1a8d8"},"ops":[{"type":3,"timestamp":1719474164,"nonce":"sDK/4Gpa8O8sDn5HDLw/nI54ZAw=","metadata":{"github-id":"IC_kwDOLg8lJc6Cxf_v","github-url":"https://github.com/roadster-rs/roadster/issues/249#issuecomment-2194014191"},"message":"Yeah, we should change how we have consumers provide custom state to follow the recommendation from Axum: https://docs.rs/axum/0.7.5/axum/extract/struct.State.html#for-library-authors. Not only would this be in-line with the recommendation, but I believe is required in order to allow consumers to use Leptos.\n\nExample:\n```rust\n#[derive(Clone)]\nstruct RoadsterState {\n    foo: String,\n}\n\n#[derive(Clone, FromRef)]\nstruct CustomState {\n    bar: String,\n    foo: RoadsterState,\n}\n\nfn baz\u003cS\u003e(s: S)\nwhere\n    RoadsterState: FromRef\u003cS\u003e,\n{\n    let roadster_state = RoadsterState::from_ref(\u0026s);\n}\n```","files":null},{"type":3,"timestamp":1719474269,"nonce":"GCRgXTKmN1fSznDD97Vxdym5JPk=","metadata":{"github-id":"IC_kwDOLg8lJc6Cxgt1","github-url":"https://github.com/roadster-rs/roadster/issues/249#issuecomment-2194017141"},"message":"\u003e but I believe is required in order to allow consumers to use Leptos.\n\nThis may not be 100% true -- we could potentially provide the required leptos state from the Roadster AppContext directly (and implement FromRef on AppContext). However, that would only solve this for Leptos, and not any other library that a consumer may want to use that had similar requirements.","files":null},{"type":3,"timestamp":1719474311,"nonce":"pr27mhhFyhVsuRVBDk50Rl0cva0=","metadata":{"github-id":"IC_kwDOLg8lJc6CxhBS","github-url":"https://github.com/roadster-rs/roadster/issues/249#issuecomment-2194018386"},"message":"This will likely be a breaking change.","files":null},{"type":3,"timestamp":1719474588,"nonce":"XzETlEs6zX6bXmbizRgkwpSMDWU=","metadata":{"github-id":"IC_kwDOLg8lJc6Cxi-C","github-url":"https://github.com/roadster-rs/roadster/issues/249#issuecomment-2194026370"},"message":"\u003e `where RoadsterState: FromRef\u003cS\u003e`\n\nI didn’t even know it was possible to write type bounds like this. This is pretty cool. We’re probably going to need to change a bunch of stuff to use this approach. I’m also not sure how this will impact our http service builder, and a bunch of other stuff… this is going to be a big change…","files":null},{"type":3,"timestamp":1719716193,"nonce":"CzKezZmTlhLxSTt2Q289QH99Sho=","metadata":{"github-id":"IC_kwDOLg8lJc6DCSIT","github-url":"https://github.com/roadster-rs/roadster/issues/249#issuecomment-2198413843"},"message":"Completed in https://github.com/roadster-rs/roadster/pull/250","files":null},{"type":4,"timestamp":1719716194,"nonce":"B4fJx4iK9YMoItgcPycIfv/BPtU=","metadata":{"github-id":"CE_lADOLg8lJc6NnGj3zwAAAAMbMcTx"},"status":2}]}